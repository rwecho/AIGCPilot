generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Category {
  id      String  @id @default(cuid())
  name_zh String  @unique
  name_en String  @unique
  slug    String  @unique
  icon    String?
  tools   Tool[]
}

model Tool {
  id            String   @id @default(cuid())
  logo          String?
  url           String   @unique
  screenshotUrl String?
  videoUrl      String?
  rate          Float    @default(5.0)
  region        String   @default("Global")
  isHot         Boolean  @default(false)
  status        String   @default("PUBLISHED") // PUBLISHED, PENDING, REJECTED
  isDeleted     Boolean  @default(false)
  icp           String?
  contact       String?
  title_zh      String
  summary_zh    String?
  content_zh    String?
  title_en      String
  summary_en    String?
  content_en    String?
  categoryId    String
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  category      Category @relation(fields: [categoryId], references: [id])
  
  // 深层次 AI 测评和动态数据属性
  coreValue     String?
  useCases      String?
  prosCons      String?
  promptExamples String?
  openSourceAlternativeId String?
  openSourceAlternative     Tool?    @relation("ToolAlternatives", fields: [openSourceAlternativeId], references: [id], onDelete: SetNull)
  alternativesFor           Tool[]   @relation("ToolAlternatives")
  likesCount    Int      @default(0)

  // 关联的行业新闻/快讯
  news          News[]   @relation("ToolNews")

  @@index([categoryId])
}

model News {
  id        String   @id @default(cuid())
  title     String
  content   String?  @db.Text
  sourceUrl String?
  status    String   @default("PUBLISHED") // PUBLISHED, PENDING, REJECTED
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  relatedTools Tool[] @relation("ToolNews")
}

model CrawlerLog {
  id        String   @id @default(cuid())
  timestamp DateTime @default(now())
  status    String
  message   String?
}

model Admin {
  id           String @id @default(cuid())
  username     String @unique
  passwordHash String
}
